<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Dialogue.Core</title><link rel="stylesheet" href="style.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Symbol">#-}</a>

<a id="30" class="Keyword">module</a> <a id="37" href="Dialogue.Core.html" class="Module">Dialogue.Core</a> <a id="51" class="Keyword">where</a>

<a id="58" class="Keyword">open</a> <a id="63" class="Keyword">import</a> <a id="70" href="Basis.html" class="Module">Basis</a>

<a id="77" class="Comment">-- An Escardó dialogue, representing a functional on a space whose</a>
<a id="144" class="Comment">-- neighborhoods are lists of Y.</a>
<a id="177" class="Keyword">data</a> <a id="𝔈"></a><a id="182" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="184" class="Symbol">(</a><a id="185" href="Dialogue.Core.html#185" class="Bound">X</a> <a id="187" href="Dialogue.Core.html#187" class="Bound">Y</a> <a id="189" href="Dialogue.Core.html#189" class="Bound">Z</a> <a id="191" class="Symbol">:</a> <a id="193" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="196" class="Symbol">)</a> <a id="198" class="Symbol">:</a> <a id="200" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="204" class="Keyword">where</a>
  <a id="212" class="Comment">-- return x means that the result is x.</a>
  <a id="𝔈.return"></a><a id="254" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a>
    <a id="265" class="Symbol">:</a> <a id="267" href="Dialogue.Core.html#189" class="Bound">Z</a>
    <a id="273" class="Symbol">→</a> <a id="275" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="277" href="Dialogue.Core.html#185" class="Bound">X</a> <a id="279" href="Dialogue.Core.html#187" class="Bound">Y</a> <a id="281" href="Dialogue.Core.html#189" class="Bound">Z</a>

  <a id="286" class="Comment">-- ask i m means that we request the ith element x of the choice sequence</a>
  <a id="362" class="Comment">-- and proceed with 𝓭 x.</a>
  <a id="𝔈.ask"></a><a id="389" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a>
    <a id="397" class="Symbol">:</a> <a id="399" href="Dialogue.Core.html#185" class="Bound">X</a>
    <a id="405" class="Symbol">→</a> <a id="407" class="Symbol">(</a><a id="408" href="Dialogue.Core.html#187" class="Bound">Y</a> <a id="410" class="Symbol">→</a> <a id="412" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="414" href="Dialogue.Core.html#185" class="Bound">X</a> <a id="416" href="Dialogue.Core.html#187" class="Bound">Y</a> <a id="418" href="Dialogue.Core.html#189" class="Bound">Z</a><a id="419" class="Symbol">)</a>
    <a id="425" class="Symbol">→</a> <a id="427" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="429" href="Dialogue.Core.html#185" class="Bound">X</a> <a id="431" href="Dialogue.Core.html#187" class="Bound">Y</a> <a id="433" href="Dialogue.Core.html#189" class="Bound">Z</a>


<a id="437" class="Comment">-- In the normalized (Brouwerian) version of the dialogue tree, queries are</a>
<a id="513" class="Comment">-- given in order.</a>
<a id="532" class="Keyword">data</a> <a id="𝔅"></a><a id="537" href="Dialogue.Core.html#537" class="Datatype">𝔅</a> <a id="539" class="Symbol">(</a><a id="540" href="Dialogue.Core.html#540" class="Bound">Y</a> <a id="542" href="Dialogue.Core.html#542" class="Bound">Z</a> <a id="544" class="Symbol">:</a> <a id="546" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="549" class="Symbol">)</a> <a id="551" class="Symbol">:</a> <a id="553" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="557" class="Keyword">where</a>
  <a id="565" class="Comment">-- η x means that the result is x.</a>
  <a id="𝔅.spit"></a><a id="602" href="Dialogue.Core.html#602" class="InductiveConstructor">spit</a>
    <a id="611" class="Symbol">:</a> <a id="613" href="Dialogue.Core.html#542" class="Bound">Z</a>
    <a id="619" class="Symbol">→</a> <a id="621" href="Dialogue.Core.html#537" class="Datatype">𝔅</a> <a id="623" href="Dialogue.Core.html#540" class="Bound">Y</a> <a id="625" href="Dialogue.Core.html#542" class="Bound">Z</a>

  <a id="630" class="Comment">-- ϝ 𝓭 means that we request the *current* element x of the choice sequence</a>
  <a id="708" class="Comment">-- and proceed with 𝓭 x.</a>
  <a id="𝔅.bite"></a><a id="735" href="Dialogue.Core.html#735" class="InductiveConstructor">bite</a>
    <a id="744" class="Symbol">:</a> <a id="746" class="Symbol">(</a><a id="747" href="Dialogue.Core.html#540" class="Bound">Y</a> <a id="749" class="Symbol">→</a> <a id="751" href="Dialogue.Core.html#537" class="Datatype">𝔅</a> <a id="753" href="Dialogue.Core.html#540" class="Bound">Y</a> <a id="755" href="Dialogue.Core.html#542" class="Bound">Z</a><a id="756" class="Symbol">)</a>
    <a id="762" class="Symbol">→</a> <a id="764" href="Dialogue.Core.html#537" class="Datatype">𝔅</a> <a id="766" href="Dialogue.Core.html#540" class="Bound">Y</a> <a id="768" href="Dialogue.Core.html#542" class="Bound">Z</a>


<a id="772" class="Keyword">private</a>
  <a id="782" class="Keyword">variable</a> <a id="791" class="Symbol">{</a><a id="792" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="794" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="795" class="Symbol">}</a> <a id="797" class="Symbol">:</a> <a id="799" href="Agda.Primitive.html#326" class="Primitive">Set</a>

  <a id="𝔈-bind"></a><a id="806" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="813" class="Symbol">:</a> <a id="815" class="Symbol">{</a><a id="816" href="Dialogue.Core.html#816" class="Bound">A</a> <a id="818" href="Dialogue.Core.html#818" class="Bound">B</a> <a id="820" class="Symbol">:</a> <a id="822" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="825" class="Symbol">}</a> <a id="827" class="Symbol">→</a> <a id="829" class="Symbol">(</a><a id="830" href="Dialogue.Core.html#816" class="Bound">A</a> <a id="832" class="Symbol">→</a> <a id="834" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="836" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="838" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="840" href="Dialogue.Core.html#818" class="Bound">B</a><a id="841" class="Symbol">)</a> <a id="843" class="Symbol">→</a> <a id="845" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="847" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="849" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="851" href="Dialogue.Core.html#816" class="Bound">A</a> <a id="853" class="Symbol">→</a> <a id="855" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="857" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="859" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="861" href="Dialogue.Core.html#818" class="Bound">B</a>
  <a id="865" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="872" href="Dialogue.Core.html#872" class="Bound">f</a> <a id="874" class="Symbol">(</a><a id="875" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="882" href="Dialogue.Core.html#882" class="Bound">x</a><a id="883" class="Symbol">)</a> <a id="885" class="Symbol">=</a> <a id="887" href="Dialogue.Core.html#872" class="Bound">f</a> <a id="889" href="Dialogue.Core.html#882" class="Bound">x</a>
  <a id="893" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="900" href="Dialogue.Core.html#900" class="Bound">f</a> <a id="902" class="Symbol">(</a><a id="903" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="907" href="Dialogue.Core.html#907" class="Bound">i</a> <a id="909" href="Dialogue.Core.html#909" class="Bound">m</a><a id="910" class="Symbol">)</a> <a id="912" class="Symbol">=</a> <a id="914" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="918" href="Dialogue.Core.html#907" class="Bound">i</a> <a id="920" class="Symbol">λ</a> <a id="922" href="Dialogue.Core.html#922" class="Bound">x</a> <a id="924" class="Symbol">→</a> <a id="926" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="933" href="Dialogue.Core.html#900" class="Bound">f</a> <a id="935" class="Symbol">(</a><a id="936" href="Dialogue.Core.html#909" class="Bound">m</a> <a id="938" href="Dialogue.Core.html#922" class="Bound">x</a><a id="939" class="Symbol">)</a>

  <a id="𝔈-bind/ρ"></a><a id="944" href="Dialogue.Core.html#944" class="Function">𝔈-bind/ρ</a> <a id="953" class="Symbol">:</a> <a id="955" class="Symbol">{</a><a id="956" href="Dialogue.Core.html#956" class="Bound">A</a> <a id="958" class="Symbol">:</a> <a id="960" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="963" class="Symbol">}</a> <a id="965" class="Symbol">(</a><a id="966" href="Dialogue.Core.html#966" class="Bound">m</a> <a id="968" class="Symbol">:</a> <a id="970" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="972" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="974" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="976" href="Dialogue.Core.html#956" class="Bound">A</a><a id="977" class="Symbol">)</a> <a id="979" class="Symbol">→</a> <a id="981" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="988" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="995" href="Dialogue.Core.html#966" class="Bound">m</a> <a id="997" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="999" href="Dialogue.Core.html#966" class="Bound">m</a>
  <a id="1003" href="Dialogue.Core.html#944" class="Function">𝔈-bind/ρ</a> <a id="1012" class="Symbol">(</a><a id="1013" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="1020" href="Dialogue.Core.html#1020" class="Bound">x</a><a id="1021" class="Symbol">)</a> <a id="1023" class="Symbol">=</a> <a id="1025" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="1032" href="Dialogue.Core.html#944" class="Function">𝔈-bind/ρ</a> <a id="1041" class="Symbol">(</a><a id="1042" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1046" href="Dialogue.Core.html#1046" class="Bound">i</a> <a id="1048" href="Dialogue.Core.html#1048" class="Bound">m</a><a id="1049" class="Symbol">)</a> <a id="1051" class="Symbol">=</a>
    <a id="1057" href="Basis.html#937" class="Function">≡.cong</a>
     <a id="1069" class="Symbol">(</a><a id="1070" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1074" href="Dialogue.Core.html#1046" class="Bound">i</a><a id="1075" class="Symbol">)</a>
     <a id="1082" class="Symbol">(</a><a id="1083" href="Basis.html#447" class="Function">funext</a> <a id="1090" class="Symbol">λ</a> <a id="1092" href="Dialogue.Core.html#1092" class="Bound">x</a> <a id="1094" class="Symbol">→</a>
      <a id="1102" href="Dialogue.Core.html#944" class="Function">𝔈-bind/ρ</a> <a id="1111" class="Symbol">(</a><a id="1112" href="Dialogue.Core.html#1048" class="Bound">m</a> <a id="1114" href="Dialogue.Core.html#1092" class="Bound">x</a><a id="1115" class="Symbol">))</a>

  <a id="𝔈-bind/α"></a><a id="1121" href="Dialogue.Core.html#1121" class="Function">𝔈-bind/α</a> <a id="1130" class="Symbol">:</a> <a id="1132" class="Symbol">{</a><a id="1133" href="Dialogue.Core.html#1133" class="Bound">A</a> <a id="1135" href="Dialogue.Core.html#1135" class="Bound">B</a> <a id="1137" href="Dialogue.Core.html#1137" class="Bound">C</a> <a id="1139" class="Symbol">:</a> <a id="1141" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1144" class="Symbol">}</a> <a id="1146" class="Symbol">{</a><a id="1147" href="Dialogue.Core.html#1147" class="Bound">f</a> <a id="1149" class="Symbol">:</a> <a id="1151" href="Dialogue.Core.html#1133" class="Bound">A</a> <a id="1153" class="Symbol">→</a> <a id="1155" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1157" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1159" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1161" href="Dialogue.Core.html#1135" class="Bound">B</a><a id="1162" class="Symbol">}</a> <a id="1164" class="Symbol">{</a><a id="1165" href="Dialogue.Core.html#1165" class="Bound">g</a> <a id="1167" class="Symbol">:</a> <a id="1169" href="Dialogue.Core.html#1135" class="Bound">B</a> <a id="1171" class="Symbol">→</a> <a id="1173" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1175" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1177" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1179" href="Dialogue.Core.html#1137" class="Bound">C</a><a id="1180" class="Symbol">}</a> <a id="1182" class="Symbol">(</a><a id="1183" href="Dialogue.Core.html#1183" class="Bound">m</a> <a id="1185" class="Symbol">:</a> <a id="1187" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1189" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1191" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1193" href="Dialogue.Core.html#1133" class="Bound">A</a><a id="1194" class="Symbol">)</a> <a id="1196" class="Symbol">→</a> <a id="1198" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="1205" href="Dialogue.Core.html#1165" class="Bound">g</a> <a id="1207" class="Symbol">(</a><a id="1208" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="1215" href="Dialogue.Core.html#1147" class="Bound">f</a> <a id="1217" href="Dialogue.Core.html#1183" class="Bound">m</a><a id="1218" class="Symbol">)</a> <a id="1220" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1222" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="1229" class="Symbol">(</a><a id="1230" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a> <a id="1237" href="Dialogue.Core.html#1165" class="Bound">g</a> <a id="1239" href="Basis.html#546" class="Function Operator">∘</a> <a id="1241" href="Dialogue.Core.html#1147" class="Bound">f</a><a id="1242" class="Symbol">)</a> <a id="1244" href="Dialogue.Core.html#1183" class="Bound">m</a>
  <a id="1248" href="Dialogue.Core.html#1121" class="Function">𝔈-bind/α</a> <a id="1257" class="Symbol">(</a><a id="1258" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="1265" href="Dialogue.Core.html#1265" class="Bound">x</a><a id="1266" class="Symbol">)</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="1277" href="Dialogue.Core.html#1121" class="Function">𝔈-bind/α</a> <a id="1286" class="Symbol">(</a><a id="1287" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1291" href="Dialogue.Core.html#1291" class="Bound">i</a> <a id="1293" href="Dialogue.Core.html#1293" class="Bound">m</a><a id="1294" class="Symbol">)</a> <a id="1296" class="Symbol">=</a>
    <a id="1302" href="Basis.html#937" class="Function">≡.cong</a>
     <a id="1314" class="Symbol">(</a><a id="1315" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1319" href="Dialogue.Core.html#1291" class="Bound">i</a><a id="1320" class="Symbol">)</a>
     <a id="1327" class="Symbol">(</a><a id="1328" href="Basis.html#447" class="Function">funext</a> <a id="1335" class="Symbol">λ</a> <a id="1337" href="Dialogue.Core.html#1337" class="Bound">x</a> <a id="1339" class="Symbol">→</a>
      <a id="1347" href="Dialogue.Core.html#1121" class="Function">𝔈-bind/α</a> <a id="1356" class="Symbol">(</a><a id="1357" href="Dialogue.Core.html#1293" class="Bound">m</a> <a id="1359" href="Dialogue.Core.html#1337" class="Bound">x</a><a id="1360" class="Symbol">))</a>

<a id="1364" class="Keyword">instance</a>
  <a id="𝔈-monad"></a><a id="1375" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1383" class="Symbol">:</a> <a id="1385" href="Basis.html#2051" class="Record">Monad</a> <a id="1391" class="Symbol">(</a><a id="1392" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1394" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1396" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="1397" class="Symbol">)</a>
  <a id="1401" href="Basis.html#2144" class="Field">Monad.ret</a> <a id="1411" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1419" class="Symbol">=</a> <a id="1421" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a>
  <a id="1430" href="Basis.html#2162" class="Field">Monad.bind</a> <a id="1441" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1449" class="Symbol">=</a> <a id="1451" href="Dialogue.Core.html#806" class="Function">𝔈-bind</a>
  <a id="1460" href="Basis.html#2307" class="Field">Monad.law/λ</a> <a id="1472" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1480" class="Symbol">=</a> <a id="1482" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="1489" href="Basis.html#2363" class="Field">Monad.law/ρ</a> <a id="1501" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1509" class="Symbol">=</a> <a id="1511" href="Dialogue.Core.html#944" class="Function">𝔈-bind/ρ</a>
  <a id="1522" href="Basis.html#2403" class="Field">Monad.law/α</a> <a id="1534" href="Dialogue.Core.html#1375" class="Function">𝔈-monad</a> <a id="1542" class="Symbol">=</a> <a id="1544" href="Dialogue.Core.html#1121" class="Function">𝔈-bind/α</a>


<a id="1555" class="Keyword">private</a>
  <a id="1565" class="Keyword">variable</a> <a id="1574" href="Dialogue.Core.html#1574" class="Generalizable">Z</a> <a id="1576" href="Dialogue.Core.html#1576" class="Generalizable">W</a> <a id="1578" class="Symbol">:</a> <a id="1580" href="Agda.Primitive.html#326" class="Primitive">Set</a>

<a id="1585" class="Comment">-- An Escardó dialogue may be run against a choice sequence.</a>
<a id="𝔈[_⋄_]"></a><a id="1646" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[_⋄_]</a> <a id="1653" class="Symbol">:</a> <a id="1655" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1657" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1659" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1661" href="Dialogue.Core.html#1574" class="Generalizable">Z</a> <a id="1663" class="Symbol">→</a> <a id="1665" class="Symbol">(</a><a id="1666" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1668" class="Symbol">→</a> <a id="1670" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="1671" class="Symbol">)</a> <a id="1673" class="Symbol">→</a> <a id="1675" href="Dialogue.Core.html#1574" class="Generalizable">Z</a>
<a id="1677" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="1680" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="1687" href="Dialogue.Core.html#1687" class="Bound">x</a> <a id="1689" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="1691" href="Dialogue.Core.html#1691" class="Bound">α</a> <a id="1693" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="1695" class="Symbol">=</a> <a id="1697" href="Dialogue.Core.html#1687" class="Bound">x</a>
<a id="1699" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="1702" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1706" href="Dialogue.Core.html#1706" class="Bound">i</a> <a id="1708" href="Dialogue.Core.html#1708" class="Bound">m</a> <a id="1710" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="1712" href="Dialogue.Core.html#1712" class="Bound">α</a> <a id="1714" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="1716" class="Symbol">=</a>
  <a id="1720" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="1723" href="Dialogue.Core.html#1708" class="Bound">m</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Dialogue.Core.html#1712" class="Bound">α</a> <a id="1728" href="Dialogue.Core.html#1706" class="Bound">i</a><a id="1729" class="Symbol">)</a> <a id="1731" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="1733" href="Dialogue.Core.html#1712" class="Bound">α</a> <a id="1735" href="Dialogue.Core.html#1646" class="Function Operator">]</a>


<a id="1739" class="Comment">-- A Brouwerian dialogue may be run against a choice sequence.</a>
<a id="𝔅[_⋄_]"></a><a id="1802" href="Dialogue.Core.html#1802" class="Function Operator">𝔅[_⋄_]</a> <a id="1809" class="Symbol">:</a> <a id="1811" href="Dialogue.Core.html#537" class="Datatype">𝔅</a> <a id="1813" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1815" href="Dialogue.Core.html#1574" class="Generalizable">Z</a> <a id="1817" class="Symbol">→</a> <a id="1819" class="Symbol">(</a><a id="1820" href="Basis.html#214" class="Datatype">ℕ</a> <a id="1822" class="Symbol">→</a> <a id="1824" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="1825" class="Symbol">)</a> <a id="1827" class="Symbol">→</a> <a id="1829" href="Dialogue.Core.html#1574" class="Generalizable">Z</a>
<a id="1831" href="Dialogue.Core.html#1802" class="Function Operator">𝔅[</a> <a id="1834" href="Dialogue.Core.html#602" class="InductiveConstructor">spit</a> <a id="1839" href="Dialogue.Core.html#1839" class="Bound">x</a> <a id="1841" href="Dialogue.Core.html#1802" class="Function Operator">⋄</a> <a id="1843" href="Dialogue.Core.html#1843" class="Bound">α</a> <a id="1845" href="Dialogue.Core.html#1802" class="Function Operator">]</a> <a id="1847" class="Symbol">=</a> <a id="1849" href="Dialogue.Core.html#1839" class="Bound">x</a>
<a id="1851" href="Dialogue.Core.html#1802" class="Function Operator">𝔅[</a> <a id="1854" href="Dialogue.Core.html#735" class="InductiveConstructor">bite</a> <a id="1859" href="Dialogue.Core.html#1859" class="Bound">m</a> <a id="1861" href="Dialogue.Core.html#1802" class="Function Operator">⋄</a> <a id="1863" href="Dialogue.Core.html#1863" class="Bound">α</a> <a id="1865" href="Dialogue.Core.html#1802" class="Function Operator">]</a> <a id="1867" class="Symbol">=</a> <a id="1869" href="Dialogue.Core.html#1802" class="Function Operator">𝔅[</a> <a id="1872" href="Dialogue.Core.html#1859" class="Bound">m</a> <a id="1874" class="Symbol">(</a><a id="1875" href="Dialogue.Core.html#1863" class="Bound">α</a> <a id="1877" class="Number">0</a><a id="1878" class="Symbol">)</a> <a id="1880" href="Dialogue.Core.html#1802" class="Function Operator">⋄</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Dialogue.Core.html#1863" class="Bound">α</a> <a id="1885" href="Basis.html#546" class="Function Operator">∘</a> <a id="1887" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="1890" class="Symbol">)</a> <a id="1892" href="Dialogue.Core.html#1802" class="Function Operator">]</a>


<a id="generic"></a><a id="1896" href="Dialogue.Core.html#1896" class="Function">generic</a> <a id="1904" class="Symbol">:</a> <a id="1906" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1908" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1910" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1912" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1914" class="Symbol">→</a> <a id="1916" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="1918" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="1920" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="1922" href="Dialogue.Core.html#794" class="Generalizable">Y</a>
<a id="1924" href="Dialogue.Core.html#1896" class="Function">generic</a> <a id="1932" href="Dialogue.Core.html#1932" class="Bound">m</a> <a id="1934" class="Symbol">=</a> <a id="1936" class="Keyword">do</a>
  <a id="1941" href="Dialogue.Core.html#1941" class="Bound">i</a> <a id="1943" href="Basis.html#2194" class="Function Operator">←</a> <a id="1945" href="Dialogue.Core.html#1932" class="Bound">m</a>
  <a id="1949" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="1953" href="Dialogue.Core.html#1941" class="Bound">i</a> <a id="1955" href="Basis.html#2144" class="Field">ret</a>

<a id="1960" class="Keyword">module</a> <a id="⊢"></a><a id="1967" href="Dialogue.Core.html#1967" class="Module">⊢</a> <a id="1969" class="Keyword">where</a>
  <a id="⊢.⋄-extensional"></a><a id="1977" href="Dialogue.Core.html#1977" class="Function">⋄-extensional</a>
    <a id="1995" class="Symbol">:</a> <a id="1997" class="Symbol">(</a><a id="1998" href="Dialogue.Core.html#1998" class="Bound">m</a> <a id="2000" class="Symbol">:</a> <a id="2002" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="2004" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2006" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="2008" href="Dialogue.Core.html#1574" class="Generalizable">Z</a><a id="2009" class="Symbol">)</a>
    <a id="2015" class="Symbol">→</a> <a id="2017" class="Symbol">{</a><a id="2018" href="Dialogue.Core.html#2018" class="Bound">α</a> <a id="2020" href="Dialogue.Core.html#2020" class="Bound">β</a> <a id="2022" class="Symbol">:</a> <a id="2024" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2026" class="Symbol">→</a> <a id="2028" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="2029" class="Symbol">}</a>
    <a id="2035" class="Symbol">→</a> <a id="2037" class="Symbol">(∀</a> <a id="2040" href="Dialogue.Core.html#2040" class="Bound">i</a> <a id="2042" class="Symbol">→</a> <a id="2044" href="Dialogue.Core.html#2018" class="Bound">α</a> <a id="2046" href="Dialogue.Core.html#2040" class="Bound">i</a> <a id="2048" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2050" href="Dialogue.Core.html#2020" class="Bound">β</a> <a id="2052" href="Dialogue.Core.html#2040" class="Bound">i</a><a id="2053" class="Symbol">)</a>
    <a id="2059" class="Symbol">→</a> <a id="2061" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2064" href="Dialogue.Core.html#1998" class="Bound">m</a> <a id="2066" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2068" href="Dialogue.Core.html#2018" class="Bound">α</a> <a id="2070" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="2072" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2074" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2077" href="Dialogue.Core.html#1998" class="Bound">m</a> <a id="2079" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2081" href="Dialogue.Core.html#2020" class="Bound">β</a> <a id="2083" href="Dialogue.Core.html#1646" class="Function Operator">]</a>

  <a id="2088" href="Dialogue.Core.html#1977" class="Function">⋄-extensional</a> <a id="2102" class="Symbol">(</a><a id="2103" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="2110" class="Symbol">_)</a> <a id="2113" class="Symbol">_</a> <a id="2115" class="Symbol">=</a>
    <a id="2121" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2129" href="Dialogue.Core.html#1977" class="Function">⋄-extensional</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="2148" href="Dialogue.Core.html#2148" class="Bound">i</a> <a id="2150" href="Dialogue.Core.html#2150" class="Bound">m</a><a id="2151" class="Symbol">)</a> <a id="2153" class="Symbol">{</a><a id="2154" href="Dialogue.Core.html#2154" class="Bound">α</a><a id="2155" class="Symbol">}</a> <a id="2157" class="Symbol">{</a><a id="2158" href="Dialogue.Core.html#2158" class="Bound">β</a><a id="2159" class="Symbol">}</a> <a id="2161" href="Dialogue.Core.html#2161" class="Bound">h</a> <a id="2163" class="Symbol">=</a>
    <a id="2169" href="Basis.html#788" class="Function">≡.seq</a>
     <a id="2180" class="Symbol">(</a><a id="2181" href="Dialogue.Core.html#1977" class="Function">⋄-extensional</a> <a id="2195" class="Symbol">(</a><a id="2196" href="Dialogue.Core.html#2150" class="Bound">m</a> <a id="2198" class="Symbol">(</a><a id="2199" href="Dialogue.Core.html#2154" class="Bound">α</a> <a id="2201" href="Dialogue.Core.html#2148" class="Bound">i</a><a id="2202" class="Symbol">))</a> <a id="2205" href="Dialogue.Core.html#2161" class="Bound">h</a><a id="2206" class="Symbol">)</a>
     <a id="2213" class="Symbol">(</a><a id="2214" href="Basis.html#937" class="Function">≡.cong</a>
      <a id="2227" class="Symbol">(λ</a> <a id="2230" href="Dialogue.Core.html#2230" class="Bound">■</a> <a id="2232" class="Symbol">→</a> <a id="2234" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2237" href="Dialogue.Core.html#2150" class="Bound">m</a> <a id="2239" href="Dialogue.Core.html#2230" class="Bound">■</a> <a id="2241" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2243" href="Dialogue.Core.html#2158" class="Bound">β</a> <a id="2245" href="Dialogue.Core.html#1646" class="Function Operator">]</a><a id="2246" class="Symbol">)</a>
      <a id="2254" class="Symbol">(</a><a id="2255" href="Dialogue.Core.html#2161" class="Bound">h</a> <a id="2257" href="Dialogue.Core.html#2148" class="Bound">i</a><a id="2258" class="Symbol">))</a>

  <a id="⊢.⋄-natural"></a><a id="2264" href="Dialogue.Core.html#2264" class="Function">⋄-natural</a>
    <a id="2278" class="Symbol">:</a> <a id="2280" class="Symbol">(</a><a id="2281" href="Dialogue.Core.html#2281" class="Bound">f</a> <a id="2283" class="Symbol">:</a> <a id="2285" href="Dialogue.Core.html#1574" class="Generalizable">Z</a> <a id="2287" class="Symbol">→</a> <a id="2289" href="Dialogue.Core.html#1576" class="Generalizable">W</a><a id="2290" class="Symbol">)</a>
    <a id="2296" class="Symbol">→</a> <a id="2298" class="Symbol">(</a><a id="2299" href="Dialogue.Core.html#2299" class="Bound">m</a> <a id="2301" class="Symbol">:</a> <a id="2303" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="2305" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2307" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="2309" href="Dialogue.Core.html#1574" class="Generalizable">Z</a><a id="2310" class="Symbol">)</a>
    <a id="2316" class="Symbol">→</a> <a id="2318" class="Symbol">(</a><a id="2319" href="Dialogue.Core.html#2319" class="Bound">α</a> <a id="2321" class="Symbol">:</a> <a id="2323" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2325" class="Symbol">→</a> <a id="2327" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="2328" class="Symbol">)</a>
    <a id="2334" class="Symbol">→</a> <a id="2336" href="Dialogue.Core.html#2281" class="Bound">f</a> <a id="2338" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2341" href="Dialogue.Core.html#2299" class="Bound">m</a> <a id="2343" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2345" href="Dialogue.Core.html#2319" class="Bound">α</a> <a id="2347" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="2349" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2351" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2354" href="Basis.html#1853" class="Field">map</a> <a id="2358" href="Dialogue.Core.html#2281" class="Bound">f</a> <a id="2360" href="Dialogue.Core.html#2299" class="Bound">m</a> <a id="2362" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2364" href="Dialogue.Core.html#2319" class="Bound">α</a> <a id="2366" href="Dialogue.Core.html#1646" class="Function Operator">]</a>

  <a id="2371" href="Dialogue.Core.html#2264" class="Function">⋄-natural</a> <a id="2381" href="Dialogue.Core.html#2381" class="Bound">f</a> <a id="2383" class="Symbol">(</a><a id="2384" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="2391" href="Dialogue.Core.html#2391" class="Bound">x</a><a id="2392" class="Symbol">)</a> <a id="2394" href="Dialogue.Core.html#2394" class="Bound">α</a> <a id="2396" class="Symbol">=</a>
    <a id="2402" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2410" href="Dialogue.Core.html#2264" class="Function">⋄-natural</a> <a id="2420" href="Dialogue.Core.html#2420" class="Bound">f</a> <a id="2422" class="Symbol">(</a><a id="2423" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="2427" class="Symbol">_</a> <a id="2429" href="Dialogue.Core.html#2429" class="Bound">m</a><a id="2430" class="Symbol">)</a> <a id="2432" href="Dialogue.Core.html#2432" class="Bound">α</a> <a id="2434" class="Symbol">=</a>
    <a id="2440" href="Dialogue.Core.html#2264" class="Function">⋄-natural</a> <a id="2450" href="Dialogue.Core.html#2420" class="Bound">f</a> <a id="2452" class="Symbol">(</a><a id="2453" href="Dialogue.Core.html#2429" class="Bound">m</a> <a id="2455" class="Symbol">_)</a> <a id="2458" href="Dialogue.Core.html#2432" class="Bound">α</a>


  <a id="⊢.⋄-commutes-with-bind"></a><a id="2464" href="Dialogue.Core.html#2464" class="Function">⋄-commutes-with-bind</a>
    <a id="2489" class="Symbol">:</a> <a id="2491" class="Symbol">{</a><a id="2492" href="Dialogue.Core.html#2492" class="Bound">m</a> <a id="2494" class="Symbol">:</a> <a id="2496" href="Dialogue.Core.html#1574" class="Generalizable">Z</a> <a id="2498" class="Symbol">→</a> <a id="2500" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="2502" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2504" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="2506" href="Dialogue.Core.html#1576" class="Generalizable">W</a><a id="2507" class="Symbol">}</a>
    <a id="2513" class="Symbol">→</a> <a id="2515" class="Symbol">(</a><a id="2516" href="Dialogue.Core.html#2516" class="Bound">n</a> <a id="2518" class="Symbol">:</a> <a id="2520" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="2522" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2524" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="2526" href="Dialogue.Core.html#1574" class="Generalizable">Z</a><a id="2527" class="Symbol">)</a>
    <a id="2533" class="Symbol">→</a> <a id="2535" class="Symbol">(</a><a id="2536" href="Dialogue.Core.html#2536" class="Bound">α</a> <a id="2538" class="Symbol">:</a> <a id="2540" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2542" class="Symbol">→</a> <a id="2544" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="2545" class="Symbol">)</a>
    <a id="2551" class="Symbol">→</a> <a id="2553" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2556" href="Dialogue.Core.html#2492" class="Bound">m</a> <a id="2558" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2561" href="Dialogue.Core.html#2516" class="Bound">n</a> <a id="2563" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2565" href="Dialogue.Core.html#2536" class="Bound">α</a> <a id="2567" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="2569" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2571" href="Dialogue.Core.html#2536" class="Bound">α</a> <a id="2573" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="2575" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2577" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2580" class="Symbol">(</a><a id="2581" href="Dialogue.Core.html#2516" class="Bound">n</a> <a id="2583" href="Basis.html#2194" class="Function Operator">&gt;&gt;=</a> <a id="2587" href="Dialogue.Core.html#2492" class="Bound">m</a><a id="2588" class="Symbol">)</a> <a id="2590" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2592" href="Dialogue.Core.html#2536" class="Bound">α</a> <a id="2594" href="Dialogue.Core.html#1646" class="Function Operator">]</a>

  <a id="2599" href="Dialogue.Core.html#2464" class="Function">⋄-commutes-with-bind</a> <a id="2620" class="Symbol">(</a><a id="2621" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="2628" class="Symbol">_)</a> <a id="2631" class="Symbol">_</a> <a id="2633" class="Symbol">=</a>
    <a id="2639" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2647" href="Dialogue.Core.html#2464" class="Function">⋄-commutes-with-bind</a> <a id="2668" class="Symbol">(</a><a id="2669" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="2673" class="Symbol">_</a> <a id="2675" href="Dialogue.Core.html#2675" class="Bound">m</a><a id="2676" class="Symbol">)</a> <a id="2678" href="Dialogue.Core.html#2678" class="Bound">α</a> <a id="2680" class="Symbol">=</a>
    <a id="2686" href="Dialogue.Core.html#2464" class="Function">⋄-commutes-with-bind</a> <a id="2707" class="Symbol">(</a><a id="2708" href="Dialogue.Core.html#2675" class="Bound">m</a> <a id="2710" class="Symbol">_)</a> <a id="2713" href="Dialogue.Core.html#2678" class="Bound">α</a>


  <a id="⊢.generic-diagram"></a><a id="2719" href="Dialogue.Core.html#2719" class="Function">generic-diagram</a>
    <a id="2739" class="Symbol">:</a> <a id="2741" class="Symbol">(</a><a id="2742" href="Dialogue.Core.html#2742" class="Bound">α</a> <a id="2744" class="Symbol">:</a> <a id="2746" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2748" class="Symbol">→</a> <a id="2750" href="Dialogue.Core.html#794" class="Generalizable">Y</a><a id="2751" class="Symbol">)</a>
    <a id="2757" class="Symbol">→</a> <a id="2759" class="Symbol">(</a><a id="2760" href="Dialogue.Core.html#2760" class="Bound">m</a> <a id="2762" class="Symbol">:</a> <a id="2764" href="Dialogue.Core.html#182" class="Datatype">𝔈</a> <a id="2766" href="Dialogue.Core.html#792" class="Generalizable">X</a> <a id="2768" href="Dialogue.Core.html#794" class="Generalizable">Y</a> <a id="2770" href="Dialogue.Core.html#792" class="Generalizable">X</a><a id="2771" class="Symbol">)</a>
    <a id="2777" class="Symbol">→</a> <a id="2779" href="Dialogue.Core.html#2742" class="Bound">α</a> <a id="2781" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2784" href="Dialogue.Core.html#2760" class="Bound">m</a> <a id="2786" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2788" href="Dialogue.Core.html#2742" class="Bound">α</a> <a id="2790" href="Dialogue.Core.html#1646" class="Function Operator">]</a> <a id="2792" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2794" href="Dialogue.Core.html#1646" class="Function Operator">𝔈[</a> <a id="2797" href="Dialogue.Core.html#1896" class="Function">generic</a> <a id="2805" href="Dialogue.Core.html#2760" class="Bound">m</a> <a id="2807" href="Dialogue.Core.html#1646" class="Function Operator">⋄</a> <a id="2809" href="Dialogue.Core.html#2742" class="Bound">α</a> <a id="2811" href="Dialogue.Core.html#1646" class="Function Operator">]</a>

  <a id="2816" href="Dialogue.Core.html#2719" class="Function">generic-diagram</a> <a id="2832" href="Dialogue.Core.html#2832" class="Bound">α</a> <a id="2834" class="Symbol">(</a><a id="2835" href="Dialogue.Core.html#254" class="InductiveConstructor">return</a> <a id="2842" href="Dialogue.Core.html#2842" class="Bound">x</a><a id="2843" class="Symbol">)</a> <a id="2845" class="Symbol">=</a>
    <a id="2851" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2859" href="Dialogue.Core.html#2719" class="Function">generic-diagram</a> <a id="2875" href="Dialogue.Core.html#2875" class="Bound">α</a> <a id="2877" class="Symbol">(</a><a id="2878" href="Dialogue.Core.html#389" class="InductiveConstructor">ask</a> <a id="2882" class="Symbol">_</a> <a id="2884" href="Dialogue.Core.html#2884" class="Bound">m</a><a id="2885" class="Symbol">)</a> <a id="2887" class="Symbol">=</a>
    <a id="2893" href="Dialogue.Core.html#2719" class="Function">generic-diagram</a> <a id="2909" href="Dialogue.Core.html#2875" class="Bound">α</a> <a id="2911" class="Symbol">(</a><a id="2912" href="Dialogue.Core.html#2884" class="Bound">m</a> <a id="2914" class="Symbol">_)</a>
</pre></body></html>